[pytest]
# 1) Auto-run async tests (no need for @pytest.mark.asyncio)
asyncio_mode = auto

# 2) Make all async fixtures share the SAME loop for the whole session
#    This prevents "Future attached to a different loop" errors.
asyncio_default_fixture_loop_scope = session
asyncio_default_test_loop_scope = session